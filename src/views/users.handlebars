{{>menu}}
<hr>
<body>
  <h1>User Management</h1>
  <hr>
  <hr>
  <table>
      <thead>
          <tr>
              <th>Name</th>
              <th>Last Name</th>
              <th>Email</th>
              <th>Role</th>
              <th>Actions</th>
          </tr>
      </thead>
      <tbody>
          {{#each users}}
              <tr>
                  <td>{{this.firstName}}</td>
                  <td>{{this.lastName}}</td>
                  <td>{{this.email}}</td>
                  <td>
                      <form action="/users/{{this._id}}/role" method="POST">
                          <select name="role" onchange="this.form.submit()">
                              {{#each this.roles}}
                                  <option value="{{this.value}}" {{#if this.selected}}selected{{/if}}>{{this.value}}</option>
                              {{/each}}
                          </select>
                      </form>
                  </td>
                  <td>
                      <form action="/users/{{this._id}}/delete" method="POST" onsubmit="return confirm('Are you sure you want to delete this user?');">
                          <button type="submit">Delete</button>
                      </form>
                  </td>
              </tr>
          {{/each}}
      </tbody>
  </table>
  {{#if totalUsers}}
      <p>Total Users: {{totalUsers}}</p>
  {{else}}
      <p>No users found.</p>
  {{/if}}
</body>